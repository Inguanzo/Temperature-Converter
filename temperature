var THEME = require('themes/flat/theme');
var SLIDERS = require('controls/sliders');
var tempVal = 10;
var convertedVal = 1;
var BUTTONS = require('controls/buttons');
var measurementVal = "none";


//skins and styles
var whiteS = new Skin({fill:"white"});
var greyS = new Skin({fill:"grey"});
var labelStyle = new Style( { font: "bold 40px", color:"white" } );

//slider info
var myLabel = new Label({left:0, right:0, height: 40, top: 100, string: "", style: labelStyle})
var myConvertedLabel = new Label({left:0, right:0, height: 40, bottom: 100, string: "", style: labelStyle})

var mySlider = SLIDERS.HorizontalSlider.template(function($){ return{
	height:50, left:50, right:50,
	behavior: Object.create(SLIDERS.HorizontalSliderBehavior.prototype, {
		onValueChanged: { value: function(container){
			SLIDERS.HorizontalSliderBehavior.prototype.onValueChanged.call(this, container);
			//tempVal.onValueChanged.call(mainCon, container);
			tempVal = this.data.value;
			trace("Value is: " + tempVal + "\n");
			mainCon.remove(myLabel);
			myLabel = new Label({left:0, right:0, height: 40, top: 40, string: tempVal, style: labelStyle})
			
			if (measurementVal == "Fahrenheit") {
				convertedVal = tempVal;
				mainCon.remove(myConvertedLabel);
				myConvertedLabel = new Label({left:0, right:0, height: 40, bottom: 40, string: convertedVal, style: labelStyle})
				mainCon.add(myConvertedLabel);
			}		
			
			mainCon.add(myLabel);	
	}}})
}});

//measurement
var myStartMeasurement = BUTTONS.RadioGroup.template(function($){ return{
	top:100, bottom:50, left:50, right:50,
	behavior: Object.create(BUTTONS.RadioGroupBehavior.prototype, {
		onRadioButtonSelected: { value: function(buttonName){
			trace("measurement:" + buttonName + " was selected.\n");
			measurementVal = buttonName;
			trace("val set to:" + measurementVal);
	}}})
}});

var myEndMeasurement = BUTTONS.RadioGroup.template(function($){ return{
	top:300, bottom:10, left:50, right:50,
	behavior: Object.create(BUTTONS.RadioGroupBehavior.prototype, {
		onRadioButtonSelected: { value: function(buttonName){
			trace("measurement:" + buttonName + " was selected.\n");
	}}})
}});


//convert



// calls
var slider = new mySlider({ min:-50, max:115, value:33,  });
var startMeasurement = new myStartMeasurement({ buttonNames: "Fahrenheit,Celsius,Kelvin" });
var endMeasurement = new myEndMeasurement({ buttonNames: "Fahrenheit,Celsius,Kelvin" });


//main
var mainCon = new Container({left:0, right:0, top:0, bottom:0, skin: greyS});
application.add(mainCon);
mainCon.add(myLabel);
mainCon.add(myConvertedLabel);
mainCon.add(startMeasurement);
mainCon.add(endMeasurement);
mainCon.add(slider);
